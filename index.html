<!DOCTYPE HTML>
<html>
    <head>
        <title>cunAR</title>
        <meta charset="UTF-8">
    
        <link rel="stylesheet" type="text/css" href="static/dist/main.css">
        <link rel="icon" type="image/x-icon" href="static/img/favicon.ico"/>
    
        <script src="js/aframe.min.js"></script>
        <script src="js/aframe-ar.min.js"></script>
        <script src="js/aframe-html-shader.min.js"></script>
    </head>
    <body x-data="app" style="margin: 0; overflow: hidden;">
        <a-scene embedded arjs vr-mode-ui="enabled: false" loading-screen="enabled: false"">
            <a-marker preset="custom" type="pattern" url="static/marker/marker-a.patt">
                <a-plane id="planeA" rotation="-90 0 0" material="shader: html; target: #htmlElement; ratio: width; fps: 60;"></a-plane>
            </a-marker>
            <a-entity camera></a-entity>
        </a-scene>
        <main :class="expand ? 'expanded' : ''">
            <div class="content" x-show="page == 'start'">
                <h1>cunAR</h1>
                <div class="body">
                    <p>Diese App enthält eine geführte Inbetriebnahme der CUNA-Produktion in der SmartFactoryOWL.</p>
                    <p>Einige der Schritte werden durch Elemente der Augmented Reality erweitert. Die Erkennung erfolgt dabei mithilfe von Markern, welche an der Maschine angebracht wurden.</p>
                </div>
                <div class="buttons">
                    <button x-on:click="updatePage('startUp')">Inbetriebnahme starten</button>
                </div>
            </div>
            
            <div id="startUp" class="content" x-show="page == 'startUp'">
                <div class="headline">
                    <h1>Inbetriebnahme</h1>
                    <div class="page">
                        <span x-text="startUpStep"></span>
                        <span>/</span>
                        <span x-text="Object.keys(startUp).length"></span>
                    </div>
                </div>
                <template x-for="id in Object.keys(startUp)" :key="id">
                    <div class="body" x-show="startUpStep == id">
                        <h2 x-text="startUp[id].title"></h2>
                        <p x-html="startUp[id].content"></p>
                    </div>
                </template>
                <div class="buttons">
                    <button  x-on:click="updateStep(startUpStep-1)" x-show="startUpStep > 1">Zurück</button>
                    <button  x-on:click="updateStep(startUpStep+1)" x-show="startUpStep < Object.keys(startUp).length">Weiter</button>
                    <button  x-on:click="resetAll()" x-show="startUpStep == Object.keys(startUp).length">Abschließen</button>
                </div>
                <button class="secondary" x-on:click="resetAll()" style="margin-top: 12px;" x-show="startUpStep != Object.keys(startUp).length">Inbetriebnahme abbrechen</button>
            </div>
            <div class="expand"  x-on:click="expand = !expand">
                <img src="static/img/expand.svg" alt="Expand">
            </div>
        </main>

        <div class="status green" x-show="startUp[startUpStep].ar">AR aktiv</div>
        <div class="status red" x-show="!startUp[startUpStep].ar">AR inaktiv</div>
        <div class="cover"></div>
        <div class="shadow" x-show="!startUp[startUpStep].ar"></div>
        <div class="ar-content">
            <div id="htmlElement" class="frame" x-text="planeText"></div>
        </div>
        <script src="js/startup.js"></script>
        <script src="js/app.js"></script>
        <script src="js/alpine.min.js" defer></script>
    </body>
</html>
