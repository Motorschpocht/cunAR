<!DOCTYPE HTML>
<html>
    <head>
        <title>cunAR</title>
        <meta charset="UTF-8">
    
        <link rel="stylesheet" type="text/css" href="static/dist/main.css">
        <link rel="icon" type="image/x-icon" href="static/img/favicon.ico"/>
    
        <script src="js/aframe.min.js"></script>
        <script src="js/aframe-ar.min.js"></script>
        <script src="js/aframe-html-shader.min.js"></script>
    </head>
    <body x-data="app" style="margin: 0; overflow: hidden;">
        <a-scene embedded arjs vr-mode-ui="enabled: false" loading-screen="enabled: false"">
            <a-marker preset="custom" type="pattern" url="static/marker/marker-a.patt">
                <a-plane id="planeA" rotation="-90 0 0" material="shader: html; target: #htmlElement; ratio: width; fps: 60;"></a-plane>
            </a-marker>
            <a-entity camera></a-entity>
        </a-scene>
        <main :class="expand || page == 'map' ? 'expanded' : ''">
            <div class="content" x-show="page == 'start'">
                <h1>cunAR</h1>
                <div class="body">
                    <p>Diese App enthält eine geführte Inbetriebnahme der CUNA-Produktion in der SmartFactoryOWL.</p>
                    <p>Einige der Schritte werden durch Elemente der Augmented Reality erweitert. Die Erkennung erfolgt dabei mithilfe von Markern, welche an der Maschine angebracht wurden.</p>
                </div>
                <div class="buttons">
                    <button style="flex: 1;" x-on:click="updatePage('startUp')">Inbetriebnahme starten</button>
                </div>
            </div>
            
            <div id="startUp" class="content" x-show="page == 'startUp'">
                <div class="headline">
                    <h1>Anleitung</h1>
                    <div class="page">
                        <span x-text="startUpStep"></span>
                        <span>/</span>
                        <span x-text="Object.keys(startUp).length"></span>
                    </div>
                </div>
                <div class="body">
                    <h2 x-text="startUp[startUpStep].title"></h2>
                    <p x-html="startUp[startUpStep].content"></p>
                </div>
                <div class="buttons">
                    <button :disabled="startUpStep == 1" x-on:click="updateStep(startUpStep-1)">
                        <img src="static/img/expand.svg" alt="Expand" style="transform: rotate(90deg);">
                    </button>
                    <button x-on:click="updatePage('map')" style="flex: 1;">Lageplan</button>
                    <button x-on:click="updateStep(startUpStep+1)" x-show="startUpStep < Object.keys(startUp).length">
                        <img src="static/img/expand.svg" alt="Expand" style="transform: rotate(-90deg);">
                    </button>
                    <button x-on:click="resetAll()" x-show="startUpStep == Object.keys(startUp).length">Beenden</button>
                </div>
                <button class="secondary" x-on:click="resetAll()" style="margin-top: 12px;" x-show="startUpStep != Object.keys(startUp).length">Inbetriebnahme abbrechen</button>
            </div>

            <div id="map" class="content" x-show="page == 'map'">
                <div class="headline">
                    <h1>Lageplan</h1>
                    <div class="page">
                        <span x-text="startUpStep"></span>
                        <span>/</span>
                        <span x-text="Object.keys(startUp).length"></span>
                    </div>
                </div>
                <h2 x-text="startUp[startUpStep].title" style="margin-top: 12px;"></h2>
                <div class="body map">
                    <div class="map-content">
                        <img src="static/img/lageplan.svg" alt="Lageplan">
                        <div id="pin" class="pin"></div>
                    </div>
                </div>
                <div class="buttons">
                    <button :disabled="startUpStep == 1" x-on:click="updateStep(startUpStep-1)">
                        <img src="static/img/expand.svg" alt="Expand" style="transform: rotate(90deg);">
                    </button>
                    <button x-on:click="updatePage('startUp')" style="flex: 1;">Anleitung</button>
                    <button x-on:click="updateStep(startUpStep+1)" x-show="startUpStep < Object.keys(startUp).length">
                        <img src="static/img/expand.svg" alt="Expand" style="transform: rotate(-90deg);">
                    </button>
                    <button x-on:click="resetAll()" x-show="startUpStep == Object.keys(startUp).length">Beenden</button>
                </div>
                <button class="secondary" x-on:click="resetAll()" style="margin-top: 12px;" x-show="startUpStep != Object.keys(startUp).length">Inbetriebnahme abbrechen</button>
            </div>


            <div class="expand"  x-on:click="expand = !expand">
                <img src="static/img/expand.svg" alt="Expand">
            </div>
        </main>

        <div class="status green" x-show="startUp[startUpStep].ar">AR aktiv</div>
        <div class="status red" x-show="!startUp[startUpStep].ar">AR inaktiv</div>
        <div class="cover"></div>
        <div class="shadow" x-show="!startUp[startUpStep].ar"></div>
        <div class="ar-content">
            <div id="htmlElement" class="frame" x-text="planeText"></div>
        </div>
        <script src="js/startup.js"></script>
        <script src="js/app.js"></script>
        <script src="js/alpine.min.js" defer></script>
    </body>
</html>
